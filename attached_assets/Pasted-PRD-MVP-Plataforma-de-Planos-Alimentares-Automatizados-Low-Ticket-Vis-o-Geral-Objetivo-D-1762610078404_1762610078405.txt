PRD – MVP Plataforma de Planos Alimentares Automatizados (Low Ticket)

#Visão Geral
##Objetivo
Desenvolver uma aplicação web mobile first voltada exclusivamente para pessoas que buscam emagrecimento, oferecendo planos alimentares personalizados de forma automatizada, simples e acessível (modelo low ticket).
O cliente poderá acessar seu painel com login e senha, visualizar seus planos alimentares e acessar conteúdos disponibilizados pela nutricionista.

##Problema Identificado
Os pacientes não estão aderindo aos planos alimentares de maior valor devido ao preço.
É necessário criar uma solução automatizada, escalável e de baixo custo, que permita manter a qualidade técnica e ampliar o alcance do atendimento nutricional

##Solução
Criar uma plataforma mobile first, que simplifique o processo de adesão ao plano alimentar:
Painel seguro para o cliente acessar planos, receitas e materiais;
Painel administrativo exclusivo para a nutricionista.

##Público-Alvo
Pessoas com foco em emagrecimento saudável, prático e acessível.
Público interessado em planos rápidos e de baixo custo.
Faixa de valor estimada: R$ 29 a R$ 69 por plano.

##Painel do Cliente
O acesso é feito com usuário e senha.
Funcionalidades principais:
Histórico de planos alimentares cadastrados no Supabase;
Exibição detalhada do plano alimentar diretamente na tela (não há PDFs);
Redefinição de senha;
Acesso às receitas e materiais disponibilizados pela nutricionista.

##Painel da Nutricionista (Admin)
Acesso restrito para a profissional.
Funcionalidades administrativas:
Cadastrar e editar pacientes (com CPF obrigatório);
Cadastrar e editar planos alimentares;
Gerenciar receitas e materiais;
Redefinir senhas de pacientes.

#Passos desenvolvimento do software
**Importante:** Siga o passo a passo abaixo para a construção do software, e só avance após a minha aprovação.

### F1: Configuração da base de dados
O primeiro passo será a configuração inicial da aplicação.
Caso não tenha nenhum administrador cadastrado na base, deve perguntar quem será o administrador do sistema (cadastrar os dados da nutricionista)
Cadastro de pelo menos 5 clientes fictícios.
Configuração do supabase:
NEXT_PUBLIC_SUPABASE_URL=https://pcqteeblywfqlrbnqrjd.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBjcXRlZWJseXdmcWxyYm5xcmpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzE4MDQsImV4cCI6MjA2NzQwNzgwNH0.bh4w_AvF8wZhYwAevsTPblRTP3r3ah6GyTBSySngoqI
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBjcXRlZWJseXdmcWxyYm5xcmpkIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTgzMTgwNCwiZXhwIjoyMDY3NDA3ODA0fQ.4mekobB6nCg4akgWRPUQXDMK6_JSl3hxDKPIOz60Q-k

F1: Configuração e envio das respostas
O primeiro passo será a configuração inicial da aplicação. 
Deve perguntar quem será o administrador do sistema (cadastrar os dados da nutricionista)
Configurações de aplicação de uso externo (Exemplo: supabase e asaas), perguntando os dados necessários para conectar no supabase
Estar preparado para Inserir todas as respostas do formulário no supabase
Ao clicar no botão de enviar, que está na ultima pergunta do formulário, deve inserir no banco de dados 


F2: Página de login 
Tornar a página de login funcionando com usuario e senha pesquisando no banco de dados.
No painel do cliente, ele deve conseguir redefinir a senha dele
No painel admin, deve conseguir redefinir a senha de qualquer cliente.
Observação: O cadastro do cliente não precisará efetuar e não precisará criar uma página de cadastro de cliente para o cliente preencher. Mas, deve possuir uma função responsável por cadastrar o cliente, pois usarei este cadastro em outro local que ainda vou definir.


F3: Cadastro de pacientes
No painel admin, deve estar preparado a listagem, cadastro, edição e exclusão de pacientes
No painel do cliente, deve possuir um local onde mostre os dados pessoais dele. Coloque no canto superior direito (um circulo com foto ou iniciais do nome) com opção de 'meus dados' e 'sair'

F4: Cadastro dos planos alimentares
No painel admin, deve estar preparado a listagem, cadastro, edição e exclusão de planos
No painel do cliente, deve estar listando os seus planos e também conseguindo pesquisar os seus planos.
No painel do cliente, deve estar conseguindo ver os detalhes dos planos alimentares


F5: Cadastro de receitas
No painel admin, deve estar preparado a listagem, cadastro, edição e exclusão de receitas
No painel do cliente, deve estar listando as receitas e também conseguindo pesquisar as receitas.
No painel do cliente, ele conseguirá mostrar os detalhes da receita

Já tenho esta estrutura de dados:
-- Script SQL para criar as tabelas no Supabase
-- Execute este script no SQL Editor do seu projeto Supabase

-- Tabela de pacientes
CREATE TABLE IF NOT EXISTS patients (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  cpf TEXT,
  email TEXT UNIQUE NOT NULL,
  phone TEXT NOT NULL,
  asaas_customer_id TEXT,
  quiz_responses JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Tabela de pagamentos
CREATE TABLE IF NOT EXISTS payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  patient_id UUID NOT NULL REFERENCES patients(id) ON DELETE CASCADE,
  asaas_id TEXT NOT NULL,
  asaas_customer_id TEXT,
  amount DECIMAL(10, 2) NOT NULL,
  status TEXT NOT NULL,
  payment_url TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Índices para melhorar performance
CREATE INDEX IF NOT EXISTS idx_patients_email ON patients(email);
CREATE INDEX IF NOT EXISTS idx_payments_patient_id ON payments(patient_id);
CREATE INDEX IF NOT EXISTS idx_payments_asaas_id ON payments(asaas_id);
CREATE INDEX IF NOT EXISTS idx_payments_status ON payments(status);

-- Trigger para atualizar updated_at automaticamente
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_patients_updated_at
  BEFORE UPDATE ON patients
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_payments_updated_at
  BEFORE UPDATE ON payments
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- Comentários nas tabelas
COMMENT ON TABLE patients IS 'Tabela de pacientes que respondem ao quiz';
COMMENT ON TABLE payments IS 'Tabela de pagamentos gerados via Asaas';

COMMENT ON COLUMN patients.quiz_responses IS 'Respostas completas do formulário em formato JSON';
COMMENT ON COLUMN patients.asaas_customer_id IS 'ID do cliente no Asaas armazenado no paciente para reuso';
COMMENT ON COLUMN payments.asaas_customer_id IS 'ID do cliente no Asaas para reuso em futuras cobranças';
COMMENT ON COLUMN payments.status IS 'Status do pagamento (PENDING, RECEIVED, CONFIRMED, etc)';


**ATENÇÃO:** Utilize o layout já existente no projeto, e caso necessário, modifique o que for preciso
